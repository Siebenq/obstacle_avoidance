obstacle_detection_node:
  ros__parameters:
    # 输入话题（双相机模式）
    topic_person: "/camera_person/points"
    topic_dog: "/camera_dog/points"
    
    # 输出话题
    output_obstacle_topic_person: "/obstacles_person"
    output_obstacle_topic_dog: "/obstacles_dog"
    output_marker_topic_person: "/obstacles_markers_person"
    output_marker_topic_dog: "/obstacles_markers_dog"
    
    # 坐标系类型
    # true = 光学坐标系 (Y向下, Z向前) - 典型的深度相机
    # false = 标准坐标系 (Z向上, X向前) - 典型的机器人坐标系
    is_optical_frame: true
    
    # ============ Person 相机参数（人视角，较高位置）============
    # 假设相机安装在人的胸前/头部位置，高度约1.6m
    person:
      voxel_leaf_size: 0.05        # 点云降采样体素大小（米）
      
      # ROI范围（前方和侧向）
      range_min_forward: 0.5       # 前方最近距离（避免相机自身反射）
      range_max_forward: 12.0      # 前方最远距离（人视角看得更远）
      range_min_lateral: -6.0      # 左侧范围
      range_max_lateral: 6.0       # 右侧范围
      
      # 地面/天花板去除
      remove_ground: true
      ground_distance: 1.6         # 相机高度1.6m
      remove_ceiling: true
      ceiling_distance: 1.5        # 天花板在相机上方1.5m
      
      # 聚类参数
      cluster_tolerance: 0.35      # 点之间最大距离（较大值，适应远距离点云稀疏）
      min_cluster_size: 25         # 最小点数
      max_cluster_size: 20000      # 最大点数
      
      # 椭圆放大系数（安全裕度，1.0=实际大小）
      ellipse_scale_factor: 1.2
    
    # ============ Dog 相机参数（机器狗视角，较低位置）============
    # 假设相机安装在机器狗上，高度约0.3-0.5m
    dog:
      voxel_leaf_size: 0.03        # 更精细的降采样（提高精度）
      
      # ROI范围（前方和侧向）- 缩小范围提高精度
      range_min_forward: 0.3       # 前方最近距离
      range_max_forward: 6.0       # 前方最远距离（缩小范围）
      range_min_lateral: -3.0      # 左侧范围（缩小）
      range_max_lateral: 3.0       # 右侧范围（缩小）
      
      # 地面/天花板去除
      remove_ground: true
      ground_distance: 0.4         # 相机高度0.4m
      remove_ceiling: true
      ceiling_distance: 2.8        # 天花板在相机上方2.8m
      
      # 聚类参数 - 更严格以减少误检
      cluster_tolerance: 0.15      # 减小容差，避免多个物体合并
      min_cluster_size: 40         # 增加最小点数，减少噪声
      max_cluster_size: 8000       # 减小最大点数
      
      # 椭圆放大系数（1.0=实际大小，不放大）
      ellipse_scale_factor: 1.0
    
    # ============ 通用参数 ============
    # RANSAC地面检测（可选，更精确但更慢）
    use_ransac_ground: false
    ground_threshold: 0.15
    
    # 障碍物过滤参数（米）
    min_obstacle_height: 0.15      # 最小高度（过滤太矮的物体）
    max_obstacle_height: 2.5       # 最大高度（过滤噪声）
    min_obstacle_width: 0.08       # 最小宽度
    max_obstacle_width: 3.0        # 最大宽度
